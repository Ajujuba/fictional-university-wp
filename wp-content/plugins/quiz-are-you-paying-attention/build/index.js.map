{"version":3,"file":"index.js","mappings":"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","sources":["webpack://quiz-are-you-paying-attention/./src/index.scss","webpack://quiz-are-you-paying-attention/external window \"React\"","webpack://quiz-are-you-paying-attention/external window [\"wp\",\"blockEditor\"]","webpack://quiz-are-you-paying-attention/external window [\"wp\",\"components\"]","webpack://quiz-are-you-paying-attention/webpack/bootstrap","webpack://quiz-are-you-paying-attention/webpack/runtime/compat get default export","webpack://quiz-are-you-paying-attention/webpack/runtime/define property getters","webpack://quiz-are-you-paying-attention/webpack/runtime/hasOwnProperty shorthand","webpack://quiz-are-you-paying-attention/webpack/runtime/make namespace object","webpack://quiz-are-you-paying-attention/./src/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"components\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import \"./index.scss\" //This line will created our style css config from our scss\nimport {TextControl, Flex, FlexBlock, FlexItem, Button, Icon, PanelBody, PanelRow, ColorPicker} from \"@wordpress/components\"\nimport {InspectorControls, BlockControls, AlignmentToolbar} from \"@wordpress/block-editor\" //our package JS is smart to search this in  our browser global scope\n\nfunction ourStartFunction(){\n\n    let locked = false; \n\n    //WP calls this function each and every time any of the data in the block changes, the advantage is that the data is always updated because the function is constantly called\n    wp.data.subscribe(function() {\n        //searches within all blocks on the page for any 'correctAnswer' set to 'undefined'\n        const results = wp.data.select(\"core/block-editor\").getBlocks().filter(function(block){\n            return block.name == \"ourplugin/are-you-paying-attention\" && block.attributes.correctAnswer == undefined\n        });\n        //If the 'CorrectAnswer' property is undefined, then I want to block the page from being saved\n        if(results.length && locked == false){\n            locked = true; \n            wp.data.dispatch(\"core/editor\").lockPostSaving(\"noanswer\")\n        }\n        //If the 'CorrectAnswer' property is not undefined, I want to allow the page to be saved\n        if(!results.length && locked){\n            locked = false; \n            wp.data.dispatch(\"core/editor\").unlockPostSaving(\"noanswer\")\n        }\n    });\n}\n\nourStartFunction();\n\nwp.blocks.registerBlockType(\n    'ourplugin/are-you-paying-attention', // slug\n    {\n        title: \"Are you Payins Attention?\", //visual title\n        icon: \"smiley\",\n        category: \"common\", //block category\n        attributes: {\n            question: {type: \"string\"},\n            answers: {type: \"array\", default: [\"\"]}, //We defined default=\"\" because when loading the page for the first time, we can see at least 1 answer field\n            correctAnswer: {type: \"number\", default: undefined},\n            bgColor: {type: \"string\", default: \"#EBEBEB\"}, \n            theAlignment: {type: \"string\", default: \"left\"}\n        },\n        description: \"Give your audience a chance to prove their comprehension.\",\n        example: {\n            attributes: {\n                question: \"What is my name?\",\n                correctAnswer: 3,\n                answers: [\"Meowsalot\", \"Barksalot\", \"Purrsloud\", \"Brad\"],\n                theAlignment: \"center\",\n                bgColor: \"#CFE8F1\"\n            }\n        }, //Here we create our preview\n        edit: EditComponent , //Control what you see in the editor screen\n        save: function (props) {\n            return null; //let's remove from JS the responsibility of returning something and sending it to php, in the database we won't save anything static, we'll let php handle the values in real time\n        }, //Controls what the public sees in the content\n    } //configuration object \n)\n\nfunction EditComponent (props) {\n    //This fn is linked to an input from the Wordpress components and not to a traditional input so we have facilities, here we don't need to receive the event and search within it, we can just receive 'value' and set it in the attribute.\n    function updateQuestion(value){\n        props.setAttributes({question: value})\n    }\n\n    function deleteAnswer(indexToDelete){\n        //the filter return  a new array with true for each item in the array, except for the one we want to delete\n        const newAnswers = props.attributes.answers.filter(function(x, index){\n            return index != indexToDelete\n        })\n        props.setAttributes({answers: newAnswers})\n\n        if(indexToDelete == props.attributes.correctAnswer){\n            props.setAttributes({correctAnswer: undefined}) //If I delete my correctAnswer, I want set undefined again in correctAnswer\n        } else if(indexToDelete < props.attributes.correctAnswer) {\n            props.setAttributes({\n              correctAnswer: props.attributes.correctAnswer - 1 //when I'm deleting an answer which has a smaller index number than the correct one, the correct answer will be shifted to the subsequent item in the array because of the new order. To resolve this add this elseif \n            });\n        }\n    }\n\n    function markAsCorrect(index){\n        props.setAttributes({correctAnswer: index})\n    }\n\n    return ( //our JSX:\n        <div className=\"paying-attention-edit-block\" style={{backgroundColor: props.attributes.bgColor}}>\n            {/* This part is about my text aligment of the block, when the people choose, nothing change here, only in my front*/}\n            <BlockControls>\n                <AlignmentToolbar value={props.attributes.theAlignment} onChange={x => props.setAttributes({theAlignment: x})}></AlignmentToolbar>\n            </BlockControls>\n            {/* Our adm tab of the block in admin page - If we used this sintax like here, WP knows exactly to do with this */}\n            <InspectorControls>\n                <PanelBody title=\"Background Color: \" initialOpen={true}>\n                    <PanelRow> \n                        {/* here I am creating a ColorPicker component that will open my color palette, by default it is gray, and as I already pass the attribute, if it changes it already saves what I choose in the DB */}\n                        <ColorPicker color={props.attributes.bgColor} onChangeComplete={x => props.setAttributes({bgColor: x.hex})}></ColorPicker>\n                    </PanelRow>\n                </PanelBody>\n            </InspectorControls>\n            {/* Our block inside the admin page */}\n            <TextControl style={{fontSize: \"20px\"}} label=\"Question: \" value={props.attributes.question} onChange={updateQuestion}></TextControl>\n            <p style={{fontSize: \"13px\", margin: \"20px 0px 8px 0px\"}} >Answers: </p>\n            {props.attributes.answers.map(function (answer, index){  //map will see my array, each element\n                return (\n                    <Flex>\n                        <FlexBlock>\n                            <TextControl value={answer} onChange={newValue => {\n                                const newAnswers = props.attributes.answers.concat([]) //Created a copy of array\n                                newAnswers[index] = newValue\n                                props.setAttributes({answers: newAnswers})\n                            }} \n                            autoFocus={answer == undefined} ></TextControl>\n                        </FlexBlock>\n                        <FlexItem>\n                            <Button onClick={() => markAsCorrect(index) }>\n                                <Icon  className=\"mark-as-correct\" icon={props.attributes.correctAnswer == index ? \"star-filled\" : \"star-empty\"}></Icon>\n                            </Button>\n                        </FlexItem>\n                        <FlexItem>\n                            <Button variant=\"link\" className=\"attention-delete\" onClick={() => deleteAnswer(index)}>\n                                Delete\n                            </Button>\n                        </FlexItem>\n                    </Flex>\n                )\n            })}\n            <Button variant=\"primary\" onClick={() => {\n                props.setAttributes({answers: props.attributes.answers.concat([undefined])}) //Set undefined to make my autofocus on this field when creating my TextControl\n            }}> Add another answer</Button>\n        </div>\n    )\n}"],"names":["TextControl","Flex","FlexBlock","FlexItem","Button","Icon","PanelBody","PanelRow","ColorPicker","InspectorControls","BlockControls","AlignmentToolbar","ourStartFunction","locked","wp","data","subscribe","results","select","getBlocks","filter","block","name","attributes","correctAnswer","undefined","length","dispatch","lockPostSaving","unlockPostSaving","blocks","registerBlockType","title","icon","category","question","type","answers","default","bgColor","theAlignment","description","example","edit","EditComponent","save","props","updateQuestion","value","setAttributes","deleteAnswer","indexToDelete","newAnswers","x","index","markAsCorrect","createElement","className","style","backgroundColor","onChange","initialOpen","color","onChangeComplete","hex","fontSize","label","margin","map","answer","newValue","concat","autoFocus","onClick","variant"],"sourceRoot":""}